DETO_3D is a superset of LAMMPS, where the integration of LAMMPS commands is central to constructing and executing simulations. In essence, DETO_3D's primary operation involves a user-defined LAMMPS model coupled with a list of interaction properties and a set of boundary conditions to apply in a simulation. The main loop of the DETO_3D program iteratively executes the simulation, updating the interaction properties of the model between each iteration towards an optimal solution.

The ground conditions for the optimisation should be defined in a LAMMPS script that 
- Defines initialisation parameters.
- Creates and defines the initial position of all particles in the simulation.
- Specifies constraints and the types of any particles that are not included in the optimisation.

The following script is provided for the L-shaped example.

```
# ===== SET INITIALISATION PARAMS ========
dimension	2
units		si
boundary	s s p
atom_style	hybrid sphere bond
comm_modify 	vel yes cutoff 3.2
newton		off
special_bonds lj 0 1 1 coul 0 1 1
timestep    	10-4

# ===== SYSTEM DEFINITION ========
variable    	nelx equal 50
variable    	nely equal 50
variable	radius equal 0.5

region		box block 0 $(v_nelx) 0 $(v_nely) -0.01 0.01
region		cutout block 20 $(v_nelx) 20 $(v_nely) -0.01 0.01 side out
region		lshape intersect 2 box cutout
create_box	12 box bond/types 78 extra/bond/per/atom 12
						
region		support_reg block INF INF 49 INF INF INF
region		force_reg block 49 INF 7.2 8.8 INF INF

lattice     	hex $(v_radius*2)
create_atoms	6 region lshape
fix             1 all nve

neighbor	2.2 bin	
neigh_modify    delay 0		

group		support_group region support_reg
group		force_group region force_reg
fix 		support support_group setforce 0 0 0	
set 		group support_group type 12			
set 		group force_group type 12

# ===== DEFINE OUTPUT VARIABLES ========
compute 	stress all stress/atom NULL bond
variable	shyd atom -(c_stress[1]+c_stress[2]+c_stress[3])/3
variable	sdev atom sqrt(0.5*((c_stress[1]-c_stress[2])^2+(c_stress[2]-c_stress[3])^2+(c_stress[3]-c_stress[1])^2)+3*(c_stress[4]^2+c_stress[5]^2+c_stress[6]^2))

compute         nbond all nbond/atom
compute         tbond all reduce sum c_nbond
```

The commands here are all LAMMPS commands and in fact the script can be run in vanilla LAMMPS. For further deatails of the commands them selves see the official LAMMPS documentation.

The script begins by initializing parameters that must be defined before particles are added. Following this, the script defines all particles that will be involved in the optimisation. This is done here by filling an L-shaped region with a regular lattice of particles but these particle positions could be just as easily read from a file. All particles are initialised as type 6 at the start of the optimisation, but these types will be subject to change as the optimisation progresses

Next boundary conditions are partially set. A static constraints is applied to the top of the L-shape and the region where force will be applied is also set. Particles in these regions are set to type 12 which they will retain throughout the optimisation as long as this is specified when we describe the DETO inputs in the next section.

It's noteworthy that the script refrains from specifying forces or interaction potentials between particles at this point, rendering the system static. The introduction of dynamics is slated is included outside of this script. Only the ground conditions of the optimisation should be included here.

!!! note

    It is possible to add dynamics into this section of an optimisation. This could be usefull for example if you want to optimise a system mid process. The commands in this script can be thought of as being used to set the system into the condition it has at the start of the optimisation. Any dynamic behaviour defined here will be run only once and not repeated during each itteration.

The last section of the script, while not imperative for executing an optimisation, defines a set of output variables. These can be included in dump files, serving for subsequent analysis.

The next section details adding the properties of the simulation that may vary throughout the optimisation. These being the types of particles, and interaction potentials between them.